# Cache node_modules to cut down on build times.
cache:
  paths:
    - node_modules

stages:
  - frontend-test
  - backend-test

variables:
  NPM_CONFIG_LOG_LEVEL: warn
  NODE_ENV: test

# Check frontend for sanity.
frontend:
  image: node:6
  stage: frontend-test
  script:
    - cd frontend
    - npm install
    - npm run lint

# Check backend for sanity.
backend:
  image: java:8
  stage: backend-test
  script:
    - cd backend
    - ./gradlew build
    - ./gradlew test
